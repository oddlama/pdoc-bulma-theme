{% extends "frame.html.jinja2" %}
{% block title %}{{ module.modulename }} API documentation{% endblock %}
{% block style %}
	{{ super() | safe }}
    {% filter minify_css %}
        <style>{% include 'syntax-highlighting.css' %}</style>
    {% endfilter %}
{% endblock %}
{% defaultmacro bases(cls) %}
    {%- if cls.bases -%}
        <wbr>(
        {%- for base in cls.bases -%}
            <span class="base">{{ base[:2] | link(text=base[2]) }}</span>
            {%- if loop.nextitem %}, {% endif %}
        {%- endfor -%}
        )
    {%- endif -%}
{% enddefaultmacro %}
{% defaultmacro default_value(var) -%}
    {%- if var.default_value_str -%}
        <span class="default_value">{{ var.default_value_str | escape | linkify }}</span>
    {%- endif -%}
{% enddefaultmacro %}
{% defaultmacro annotation(var) %}
    {%- if var.annotation_str -%}
        <span class="annotation">{{ var.annotation_str | escape | linkify }}</span>
    {%- endif -%}
{% enddefaultmacro %}
{% defaultmacro decorators(doc) %}
    {% for d in doc.decorators if not d.startswith("@_") %}
        <div class="decorator">{{ d }}</div>
    {% endfor %}
{% enddefaultmacro %}
{% defaultmacro headerlink(doc) -%}
    <a class="headerlink" href="#{{ doc.qualname }}">#&nbsp;&nbsp</a>
{% enddefaultmacro %}
{% defaultmacro icontext(icon, name, textclass="", li=False) -%}
    {% if li %}<li>{% endif %}
    <span class="icon-text">
        <span class="icon"><i class="{{icon}}"></i></span>
        <span class="{{textclass}}">{{name}}</span>
    </span>
    {% if li %}</li>{% endif %}
{% enddefaultmacro %}
{% defaultmacro function(fn) -%}
    <div class="attr function">{{ headerlink(fn) }}
        {{ decorators(fn) }}
        {% if fn.name == "__init__" %}
            <span class="name">{{ ".".join(fn.qualname.split(".")[:-1]) }}</span>
            {#- no space -#}
            <span class="signature">{{ fn.signature_without_self | escape | linkify }}</span>
        {% else %}
            <span class="def">{{ fn.funcdef }}</span>
            <span class="name">{{ fn.name }}</span>
            {#- no space -#}
            <span class="signature">{{ fn.signature | escape | linkify }}</span>:
        {% endif %}
    </div>
{% enddefaultmacro %}
{% defaultmacro variable(var) %}
    <div class="attr variable">{{ headerlink(var) }}
        <span class="name">{{ var.name }}</span>{{ annotation(var) }}{{ default_value(var) }}
    </div>
{% enddefaultmacro %}
{% defaultmacro submodule(mod) %}
    <div class="attr module">{{ headerlink(mod) }}<span class="name">{{ mod.taken_from | link }}</span></div>
{% enddefaultmacro %}
{% defaultmacro class(cls) %}
    <div class="attr class">
        {{ headerlink(cls) }}
        {{ decorators(cls) }}
        <span class="def">class</span>
        <span class="name">{{ cls.qualname }}</span>
        {{- bases(cls) -}}:
    </div>
{% enddefaultmacro %}
{% defaultmacro member(doc) %}
    {% if doc.type == "class" %}
        {{ class(doc) }}
    {% elif doc.type == "function" %}
        {{ function(doc) }}
    {% elif doc.type == "module" %}
        {{ submodule(doc) }}
    {% else %}
        {{ variable(doc) }}
    {% endif %}
    {% if doc.type != "variable" %}
        {{ view_source(doc) }}
    {% endif %}
    {{ docstring(doc) }}
{% enddefaultmacro %}
{% defaultmacro docstring(var) %}
    {% if var.docstring %}
        <div class="docstring">{{ var.docstring | to_markdown | to_html | linkify(namespace=var.qualname) }}</div>
    {% endif %}
{% enddefaultmacro %}
{% defaultmacro nav_members(members) %}
    <ul class="memberlist">
        {% for m in members if is_public(m) | trim %}
            <p>{{ m.type }} --- {{ m.name }}</p>
            {% if m.type == "class" %}
                {% if m.own_members %}
                    {{ nav_members(m.own_members) | indent(12) }}
                {% endif %}
            {% endif %}
        {% endfor %}
        {#
        {% for m in members if is_public(m) | trim %}
            <li>
                {% if m.type == "class" %}
                    <a class="class" href="#{{ m.qualname }}">{{ m.qualname }}</a>
                    {% if m.own_members %}
                        {{ nav_members(m.own_members) | indent(12) }}
                    {% endif %}
                {% elif m.type == "module" %}
                    <a class="module" href="#{{ m.name }}">{{ m.name }}</a>
                {% elif m.name == "__init__" %}
                    <a class="function" href="#{{ m.qualname }}">{{ m.qualname.split(".")[-2] }}</a>
                {% else %}
                    <a class="{{ m.type }}" href="#{{ m.qualname }}">{{ m.name }}</a>
                {% endif %}
            </li>
        {% endfor %}
        #}
    </ul>
{% enddefaultmacro %}
{% defaultmacro is_public(doc) %}
    {#
    This macro is a bit unconventional in that its output is not rendered, but treated as a boolean:
    Returning no text is interpreted as false, returning any other text is iterpreted as true.
    Implementing this as a macro makes it very easy to override with a custom template..
    #}
    {% if not doc.name.startswith("_") %}
        {# members not starting with an underscore are considered public by default #}
        true
    {% elif doc.name == "__init__" %}
        {# the constructor is our special case which we also treat as public #}
        true
    {% elif doc.name == "__doc__" %}
        {# Sometimes we have __doc__ in __all__, which we want to exclude for pdoc's purposes. #}
        {# https://github.com/mitmproxy/pdoc/issues/235 #}
    {% elif doc.qualname is in(module.obj.__all__ or []) %}
        {# members starting with an underscore are still public if mentioned in __all__ #}
        true
    {% endif %}
{% enddefaultmacro %}
{# fmt: off #}
{% defaultmacro inherited(cls) %}
    {% for base, members in cls.inherited_members.items() %}
        {% set m = None %}{# workaround for https://github.com/pallets/jinja/issues/1427 #}
        {% set member_html %}
            {% for m in members if is_public(m) | trim %}
                <dd id="{{ m.qualname }}" class="{{ m.type }}">
                    {{- m.taken_from | link(text=m.name.replace("__init__",base[1])) -}}
                </dd>
            {% endfor %}
        {% endset %}
        {# we may not have any public members, in which case we don't want to print anything. #}
        {% if member_html %}
            <div><dt>{{ base | link }}</dt>
                {{ member_html }}
            </div>
        {% endif %}
    {% endfor %}
{% enddefaultmacro %}
{# fmt: on #}
{% defaultmacro view_source(doc) %}
    {% if show_source and doc.source %}
        <details>
            <summary>View Source</summary>
            {{ doc.source | highlight }}
        </details>
    {% endif %}
{% enddefaultmacro %}
{% defaultmacro module_name() %}
    <h1 class="modulename">
        {% set parts = module.modulename.split(".") %}
        {% for part in parts %}
            {%- set fullname = ".".join(parts[:loop.index]) -%}
            {%- if fullname in all_modules and fullname != module.modulename -%}
                <a href="./{{ "../" * loop.revindex0 }}{{ part }}.html">{{ part }}</a>
            {%- else -%}
                {{ part }}
            {%- endif -%}
            {%- if loop.nextitem -%}
                <wbr>.
            {%- endif -%}
        {% endfor %}
    </h1>
{% enddefaultmacro %}
{% block head %}
    {% if math %}{% include "math.html.jinja2" %}{% endif %}
{% endblock %}
{% block body %}
    <div class="columns is-fullheight">
		{% block nav %}
			<div class="column is-3">
				<nav id="sidebar" class="menu" style="position: sticky; vertical-align: top; max-height: 100vh; overflow-y: auto; top: 0; bottom: 0; padding: 30px;">
					<div>
						{% block module_list_link %}
							{% set parentmodule = ".".join(module.modulename.split(".")[:-1]) %}
							{% if parentmodule and parentmodule in all_modules %}
								<a class="pdoc-button module-list-button" href="../{{ parentmodule.split(".")[-1] }}.html">
									{% include "box-arrow-in-left.svg" %}
									&nbsp;
									{{- parentmodule -}}
								</a>
							{% elif all_modules|length > 1 %}
								<a class="pdoc-button module-list-button" href="{{ "../" * module.modulename.count(".") }}index.html">
									{% include "box-arrow-in-left.svg" %}
									&nbsp;
									Module Index
								</a>
							{% endif %}
						{% endblock %}

						{% block nav_title %}
							{% if logo %}
								{% if logo_link %}<a href="{{ logo_link }}">{% endif %}
								<img src="{{ logo }}" class="logo" alt="project logo"/>
								{% if logo_link %}</a>{% endif %}
							{% endif %}
						{% endblock %}

						{% block search_box %}
							{% if search and all_modules|length > 1 %}
								{# we set a pattern here so that we can use the :valid CSS selector #}
								<input type="search" placeholder="Search..." role="searchbox" aria-label="search"
									pattern=".+" required>
							{% endif %}
						{% endblock %}

						{% set index = module.docstring | to_markdown | to_html | attr("toc_html") %}
						{% if index %}
                            <p class="menu-label">Contents</p>
							{{ index | safe }}
						{% endif %}

                        {% if module.submodules %}
                            <p class="menu-label">Submodules</p>
                            <ul class="menu-list">
								{% for submodule in module.submodules %}
									{{ submodule.taken_from | link(text=icontext(
                                        icon='fa-solid fa-cube',
                                        name=submodule.name,
                                        textclass="is-family-monospace",
                                        li=True)) }}
								{% endfor %}
							</ul>
						{% endif %}

						{% if module.members %}
                            <p class="menu-label">API Documentation</p>
							{{ nav_members(module.members.values()) }}
						{% endif %}

						{% block nav_footer %}
							{% if footer_text %}
							<footer>{{ footer_text }}</footer>
							{% endif %}
						{% endblock %}

						{% block attribution %}
							<a title="pdoc: Python API documentation generator" href="https://pdoc.dev">
								<span class="icon-text">
									built with <span class="is-hidden">pdoc</span>
									<span class="icon">
										<img alt="pdoc logo" src="data:image/svg+xml, {%- filter urlencode %}{% include "pdoc-logo.svg" %}{% endfilter %}"/>
									</span>
								</span>
							</a>
						{% endblock %}
					</div>
				</nav>
			</div>
		{% endblock %}
		<main class="column">
			{% block module_info %}
				<section>
					{% block edit_button %}
						{% if edit_url %}
							<a class="pdoc-button git-button" href="{{ edit_url }}">Edit on GitHub</a>
						{% endif %}
					{% endblock %}
					{{ module_name() }}
					{{ docstring(module) }}
					{{ view_source(module) }}
				</section>
			{% endblock %}
			{% block module_contents %}
				{% for m in module.flattened_own_members if is_public(m) | trim %}
					<section id="{{ m.qualname or m.name }}">
						{{ member(m) }}
						{% if m.type == "class" %}
							{% for m in m.own_members if m.type != "class" and is_public(m) | trim %}
								<div id="{{ m.qualname }}" class="classattr">
									{{ member(m) }}
								</div>
							{% endfor %}
							{% set inherited_members = inherited(m) | trim %}
							{% if inherited_members %}
								<div class="inherited">
									<h5>Inherited Members</h5>
									<dl>
										{{ inherited_members }}
									</dl>
								</div>
							{% endif %}
						{% endif %}
					</section>
				{% endfor %}
			{% endblock %}
		</main>
	</div>
    {% if mtime %}
        {% include "livereload.html.jinja2" %}
    {% endif %}
    {% block search_js %}
        {% if search and all_modules|length > 1 %}
            {% include "search.html.jinja2" %}
        {% endif %}
    {% endblock %}
{% endblock %}
